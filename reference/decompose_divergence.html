<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Additively decompose divergence scores by and within groups — decompose_divergence • rsegregation</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Additively decompose divergence scores by and within groups — decompose_divergence" />
<meta property="og:description" content="The Divergence Index is additively decomposable. This function allows for
splitting a population into groups of observations and calculating the
divergence score within those groups and between those groups." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rsegregation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/arthurgailes/rsegregation/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Additively decompose divergence scores by and within groups</h1>
    <small class="dont-index">Source: <a href='https://github.com/arthurgailes/rsegregation/blob/master/R/decompose.R'><code>R/decompose.R</code></a></small>
    <div class="hidden name"><code>decompose_divergence.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The Divergence Index is additively decomposable. This function allows for
splitting a population into groups of observations and calculating the
divergence score within those groups and between those groups.</p>
    </div>

    <pre class="usage"><span class='fu'>decompose_divergence</span><span class='op'>(</span>
  <span class='va'>dataframe</span>,
  groupCol <span class='op'>=</span> <span class='cn'>NULL</span>,
  weightCol <span class='op'>=</span> <span class='cn'>NA</span>,
  output <span class='op'>=</span> <span class='st'>"scores"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dataframe</th>
      <td><p>A dataframe composed of numeric/integer columns, with the exception
of a column named in <code>groupCol</code>. All columns are used in the divergence calculation
except for those specified in <code>groupCol</code> and <code>weights</code>(optional)</p></td>
    </tr>
    <tr>
      <th>groupCol</th>
      <td><p>Name of the column(s) in the dataframe used for grouping.
if passing a <code>grouped_df</code> to <code>dataframe</code>, this parameter is ignored. If using multiple
groups, divergence will be aggregated by all unique combinations of all groups, and compared
to the total datafame</p></td>
    </tr>
    <tr>
      <th>weightCol</th>
      <td><p>Either NA (default), which sets <code>weightCol</code> to the rowwise
sum of <code>dataframe</code>; or a character string of the column name in <code>dataframe</code>
that should be used for weightCol.</p></td>
    </tr>
    <tr>
      <th>output</th>
      <td><p>Any of:</p><dl>
<dt>"scores"</dt><dd><p>Default. The individual within and between divergence scores for each
row or group, plus the total score.</p></dd>
<dt>"weighted"</dt><dd><p>As summed, but includinga column of weights to use if summing them both
across the entire dataset.</p></dd>
<dt>"percentage"</dt><dd><p>One row for each entry(or group) as in "scores," but scaled so each
observation reports a percentage of the total score that would be reproted with "summed".</p></dd>
<dt>"all"</dt><dd><p>The output from <code>summed</code>, <code>weighted</code>, and <code>percentage.</code></p></dd>
<dt>"scaled"</dt><dd><p>Not yet implemented. Re-scales divergence scores the divergence index to
have a range  of 0 to 1 by dividing by its maximum value for a given population. See details.</p></dd>

</dl></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="source"><a class="anchor" href="#source"></a>Source</h2>

    <p>Roberto, 2016. "A Decomposable Measure of Segregation and Inequality."</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataframe as specified by the <code>output</code> parameter.</p>
<p>The dataframe will have three columns: 'within_divergence', equivalent to
<code><a href='divergence.html'>divergence()</a></code> for each dataframe or group in <code>dataframe</code>;
'between_divergence', the divergence score of each group's demographics compared
to the full population; and <code>weightCol</code>, the sum of the weights for each group.
The sum of <code>decompose_divergence(...,summed = T)</code> should
equal the result of <code><a href='divergence.html'>divergence(...,summed = T)</a></code></p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The sum of the scores reported in <code>decompose_divergence</code> when setting summed==TRUE
should always be equal to the</p>
<p>Deomposing the divergence index allows users to simultatneously examine the segregation within
and between groups of a large geography. Furthermore, users can assess the percentage of
segregation coming from each group.</p>
<p>The <code>output</code> paramater "scaled" transforms the divergence index
it from an absolute to a relative measure of inequality and segregation, and negates
several of its desirable properties, including aggregation equivalence and independence.
(See Roberto, 2016)</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The <code>divergence</code> parameters for each group are set to their defaults
unless explicitly noted above.</p>
<p><code>decompose_divergence</code> treats the entire dataset its given as the total population,
which may not be desirable in some contexts, for example, when trying to return divergence
scores across years. In that context, it's helpful to split the dataframe into a list of
dataframes and use <code>decompose_divergence</code> inside a sapply function.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Arthur Gailes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


